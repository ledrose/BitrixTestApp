Проект для тестового задания на должность "Бекенд-разработчика" в Sibcode на 1С Битрикс.

Буду благодарен, если даже не пройду на вакансию, если вы (проверяющий) оставите замечания в Issues данного репозитория (ну или по почте) хотя бы в общих словах ибо хотелось бы знать ошибки, чтоб в следующий раз не проколоться на них.

Всего заняло около 8-10 часов с учетом отсутствия опыта работы с ним. Из них примерно 2 часа ушло на установку, 30 минут - на итоговое развертывание и где-то час на отладку почты, так как она отказывалась отправлять сообщения о регистрации.

Немного о том как это работает:
1) Структура сайта
  - /auth - авторизация
  - /register - регистрация
  - /profile - профиль
  - /api-docs - Swagger
  - /api/v1/user/loyalty-points/{user_id} - GET API на получение текущих баллов пользователей
  - /api/v1/user/loyalty-points-history/{user_id} - GET API на получение истории изменения баллов. Поддерживает пагинацию (?limit=10&offset=0)

2) В репозитории отсутстсвует большая часть содержимого папки /bitrix из-за .gitignore, который я взял из интернета.
3) Регистрация и авторизация сделана на снандартных компоненентах. Для отправки на почту письма подтверждения надо настроить .msmtprc файл в корне домашней папки пользователя, который на тестовом серевере настроен на мою mail.ru почту, на настройку чего было потрачено больше, чем хотелось бы времени.
4) Инфоблок для вывода изменения баллов сделан не сильно оптимально. Он сделал был так, что дата является является частью датой начала активности, а изменения баллов и пользователь являются атрибутами.
5) Компонент для формы (и вывода баллов пользователей) (transaction.update.form) является классовым компонентом, в котором в отдельных методах обрабатывается GET и POST запросы. POST запрос в конце выполнения перенаправляет сам на себя (т.е GET) с целью обновления данных, а также убирания POST аргументов (иначе каждый раз при перезагрузке страницы форма будет срабатывать снова)
6) У меня были проблемы с созданием пользовательского поля (количество баллов) автоматически при регистрации через компонент main.user.register (которых не было при создании пользователя через панель администратора). Если поле не поставить обязательным оно оказывается пустым, а если его сделать обязательным, то поле автоматически добавляется в форму регистрации и оно должно быть заполненным пользователем (а если запретить его изменение пользователем, то оно не отправляется при регистрации, что вызывает ошибку). Учитывая, что я не нашел решения в интернете и то, что в задании сказано, что оно должно быть сделано на готовом компоненте, я добавил EventHandler в /bitrix/php_interface/init.php, который перед созданием пользователя ставит баллы равными 1000 если, они уже не стоят, что не является хорошим решением, но я не нашел как это сделать иначе.
7) Компонент для отображения списка изменений является компонент "bitrix:news.list" с изменным шаблоном. Так как я без понятия, какие конкретно моменты данное задание пытается проверить, то решил не делать этот компонент "самописно".
8) API реализовано в виде отдельного модуля (custom.rest), что можно было и не делать, так как внутри всего один контроллер. Также уже есть модуль REST_API встроенный в Битрикс, но я либо не нашел, как его настроить для кастомных путей, либо он только для своих путей.
9) Controller API наследует от Controller, так что он возвращает ответ в виде [status: 'success', data: [], errors: [] ], что не является типичным для REST API. Тем не менее так как оно является стандартным и я встречал такой формат "в природе" (а также в задании явно не было сказано про это) я оставил это в таком формате. Это же означает, что в Swagger отсутствуют 400, 500 ошибки для всех путей, ввод отсутствуюшего Id пользователя не является ошибкой, оно просто выдает пустой список.
В ретроспективе эндпоинты лучше было бы сделать "GET /api/v1/user/{user_id}/points", "GET /api/v1/user/{user_id}/points/history", а также добавить в реузльтат флаг, является ли это последней страницей, но так как задание уже отправлено со временем выполнения, не считаю это корректным исправлять
10) Для подключения данного API были изменен .httpaccess для того, чтобы в /bitrix/.settings.php можно было настроить использование web.php, api.php файлов для routing.